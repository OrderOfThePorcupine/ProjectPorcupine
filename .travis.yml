language: csharp
os:
- osx
osx_image: xcode9.2
rvm:
- 2.2
jobs:
  include:
  - stage: unit-tests
    script: "./Scripts/unit-tests.sh"
    install:
    - "./Scripts/Install/unity.sh"
    mono: none
  - stage: stylecop
    script: "./Scripts/check-style.sh"
    install:
    - "./Scripts/Install/stylecop.sh"
  - stage: deploy
    if: type = cron
    script: "./Scripts/build.sh"
    mono: none
    install:
    - "./Scripts/Install/unity.sh"
    deploy:
      skip_cleanup: true
      provider: bintray
      file: "./Scripts/bintray.json"
      user: koosemose
      key:
        secure: PufaISwFWiFSLoBM/fMIBpABcTAmktf4pYS9nbEB5IrnYPm67FKLsFjVKofCkMVT/Z7/DoglqT88zit/g1nFklcAvAcQ3dz5zfWqftpIX5fWG7KnNggivnM0EZldj81lVlBuwQeg98F84VVK6qVAk1bcTxdosPn8gtGw3/QSGqWpMe1il38YFG8nb/hMx2lgJqw4s/55yau96N6/05WJdSbdmfdtptoz9oXRBr5Yq2vHwvtQPuNJNaxx7fCcf4URPrb78vShB+Uvj3+Lppvmmf7xIKhcSPXLIEXN8Szoa+CSBdbn6jm/7gD4mPdpN8UeK9MtqskSeg2lrdOw6ABzfxFmBfd+NlktTBE01uAXLJmvtoarcyR5jLAI+I0306YjmxYL4ZW7SwcSTaOLz6N6CvzbkAWSk6jJ51Uq90bpVE7k6d1VaA5V9DKdAjL1AdIuyMNMmal+wzo43/7jbij6iBBO482AjEkxEIsbS6C1UXMdfBDwRjT0Os3FcXXX3VVARiRXfXn7ZfYvFpvt1sSil6rxsZkHPrg9egvNLG2fjOVR79+cDQII0xGv25z8cNrVV9ligXCxjJrE4CW5EQ8Jp3188E9QDek/6dt3tgRUS4egA83o+aYLAeQDIYtc09U1gbw6SFI+QhLBllHO0WFPjaAm+MGJtewfwVYuAUNZmXE=
env:
  global:
  - BUILD_VERSION=$( date +%Y.%V )
  - secure: az1Z+9x/jiS2VvE3TAvEH6t/9bPb+7nxS9xwWrxQJBXfn0D+pR5rIHLkYxwvHc59BmlsiBk9FxEL3cam42ryF1SXboqdHXwqcKtG7p7LaHq8nmnxfejutWdD7wqTXdNAJMmXdrFxXMYrHfuW8bGEQrQD37s/OyWrGoOGu2qEfn4ha+HcHEpOC6t+ZNU2ILpbBciZ9RhpZu/r43pXIyC8xv3A9WV968lGSGkRJMwOFhPXrhrPQ2WMSRWwW0R/HH8/1JXOnSCLJO7xXzyet7zRK4NnX9kLCiNBsW1u2ERA/EDUYcX/9zb+hdQYjMqQ8hg3UCv/HE4R2pK3vrgL/SSsdenpnjU30su0CGm368olxT8LbnHZNPhoRnSq+JZCkNiSr4bhNh0VS69YyM7RLW4lqBJ92djsPMZS1Lgos9gFY48wAqVkfEXpovy1kw1wLWKymFjwBW9XCFSoX7w5lwFPUCFJ7hb/vIJtNuzWjGp/oH64K4YhL9tBNuWOUDN3bbBRmruTcdE4iuIoIUa896yDcxBbobvM3tSJguR/ewvDReI6pOsNwzuKxD5YD5EMHcr8HtCWnCkKcBNjNr0UxmQChv2edC49wb2q1QTDEvswwoLKnRjDttv3IzPWiMviGAVwW6Fv/x/nHqOhIz+yJnKuRg21CabJjQzDXQ1ZUaj0eHo=
  - secure: Zx2N6Jc9oa4/KK+r4tsje447UCKCxTB2Bi70DLZyvtbZ8l1u6gVx2Aqn+eUvwtnIh3jvm09jef9UCS74crRFiKwQOsSy27s/QvxEUqmzKEiChL6BOL2by5e9LYMMa/eASqyvhCKZ5ppiWa2+1tIRfIJFjRnPiLZ3OUr0h18EXweGjtyp30ZjVZ0myr/Ox2T+lcp3T8xWKVuLbqrE59ob1hO7LI6ul82J43Dklc9Q3cxNNz5k2wxvRdRbhOw5dkVnrUeVVsRFobUgR9gnW0HJa4JgeqmCwpuHIjm0guzi76iKUmfMUIaNoqhWaMiY7jDnnLyFkBr7rwN4JVviVfJ6RQaBM75hSKaZNZaTjG0jfccDKSMDOMrldcd0daPQ0qhTEAt3h31BAplwyZ0myOfFkw0gujKYdBzQwrNN8hxpbHEEXCV9mxfSryb83LYVJe2ykuYdv8cXpvylY1XM4k+bSifXsAmGcmFAqMwG/WVILCnccvX4fQHxtMTBN+5AG9GgJNY+Crnxpe7kTEjwll2f2UQ26sEhMgdOzG9kmuZqK3pQ4HvjlLPGieW/YtPcUud7jGuduO7rzyb1ydCpS8BN4yycv/OJd+WYX7tvV+C7Mc5gZH8D4J58kivVN+XyB2bEgQPWX82MDW1y4Yf99L/PWO5yLD16sCVMbLhKYsnz2/8=
before_install:
- chmod +x ./Scripts/Install/unity.sh
- chmod +x ./Scripts/Install/stylecop.sh
- chmod +x ./Scripts/unit-tests.sh
- chmod +x ./Scripts/test.sh
- chmod +x ./Scripts/check-style.sh
- chmod +x ./Scripts/build.sh
- chmod +x ./Scripts/generate-bintray-json.sh
notifications:
  email: false
